<div class="results-field"></div>

<div class="ui link cards centered grid">
    <div class="ui cards">
        <div class="card">
            <div class="content">
                <img class="game-image ui image small" src="/assets/images/gamelogo.jpg" alt="Game Logo">
                <div class="header">
                    Default Game header
                </div>
                <div class="description">
                    Default game description
                </div>
            </div>
            <div class="ui bottom attached button">
                <i class="add icon"></i>
                Add Game
            </div>
        </div>
        <div class="card">
            <div class="content">
                <img class="game-image ui image small" src="/assets/images/gamelogo.jpg" alt="Game Logo">
                <div class="header">
                    Default Game header
                </div>
                <div class="description">
                    Default game description
                </div>
            </div>
            <div class="ui bottom attached button">
                <i class="add icon"></i>
                Add Game
            </div>
        </div>
    </div>

</div>


<script>

    $(document).ready(function () {

        function createGameSection(data) {
            for (var i = 0; i < data.length; i++) {
                var gameSection = $("<div>");
                gameSection.addClass("game");
                gameSection.attr("id", "game-well-" + data[i].id);
                $(".results-field").append(gameSection);
                //$(gameSection).append("<img src=" + data[i].screenshots[0].url + ">");
                $(gameSection).append("<h3>" + data[i].name + "</h3>");
                $(gameSection).append("<p>" + data[i].summary + "</p>");
            }
        }



        $('.ui.rating').rating({
            initialRating: 1,
            maxRating: 5
        });
        $("#signinModal").click(function () {
            $(".signinModal").modal("show");
        });
        $("#loginButton").on("click", function (event) {
            event.preventDefault();
            var email = $("#email").val().trim();
            var password = $("#password").val().trim();

            $.post("/login", { email: email, password: password }, function (data) {
                console.log(data)
            })
        })

        $("#signupModal").click(function () {
            $(".signupModal").modal("show");
        });

        $("#signUp").on("click", function (event) {
            event.preventDefault();
            var name = $("#firstName").val().trim() + " " + $("#lastName").val().trim();
            var email = $("#signUpEmail").val().trim();
            var password = $("#signUpPassword").val().trim();

            console.log(name);
            console.log(email);
            console.log(password);

            $.post("/signup", { name: name, email: email, password: password }, function (data) {

                console.log(data)
            });

        })

        $(".modal").modal({
            closable: true
        });

        $.get("/search?title=barbie", function (data) {
            console.log(data);
            for (var i = 0; i < data.length; i++) {
                var gameSection = $("<div>");
                gameSection.addClass("game");
                gameSection.attr("id", "game-well-" + data[i].id);
                $(".results-field").append(gameSection);
                $(gameSection).append("<img src=" + data[i].screenshots[0].url + ">");
                $(gameSection).append("<h3>" + data[i].name + "</h3>");
                $(gameSection).append("<p>" + data[i].summary + "</p>");
            }
        });
    });

    $("#search").on("click", function (event) {
        event.preventDefault();
        $(".results-field").empty();
        var title = $("#gameSearch")
            .val()
            .trim();
        $.get("/search?title=" + title, function (data) {
            console.log(title);
            console.log(data);
            createGameSection(data);
        });
    });
</script>